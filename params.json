{"name":"Mapred.io","tagline":"mapreduce based on socket.io","body":"mapred.io\r\n=========\r\n\r\nmapreduce based on socket.io  \r\nYou can use this module, use the browser to easily build mapreduce programming model based on parallel computing platform. On this platform, you can submit the page using javascript mapreduce tasks.\r\n\r\n##install\r\n```js\r\nnpm install mapred.io\r\n```\r\n\r\n## Server\r\n```js\r\nvar app = require('http').createServer(handler)\r\n  , fs = require('fs')\r\n  , io = require('mapred.io').listen(app)\r\n  , parse = require('url').parse;\r\n  \r\n  app.listen(80);\r\n  io.set('log level', 2);\r\n\r\nfunction handler (req, res) {\r\n  var info = parse(req.url, true);\r\n\r\n  var hander = function (err, data) {\r\n\tif (err) {\r\n\t  res.writeHead(500);\r\n\t  return res.end('Error loading file');\r\n\t}\r\n\r\n\tres.writeHead(200);\r\n\tres.end(data);\r\n  }\r\n  if (info.pathname.match(/\\/public/))\r\n\tfs.readFile(__dirname + info.pathname, hander )\r\n  else if (info.pathname.match(/\\/client/))\r\n\tfs.readFile(__dirname + '/client.html', hander )\r\n  else fs.readFile(__dirname + '/job.html', hander )\r\n}\r\n\r\n\r\n\r\n```\r\n\r\n## Client\r\n```html\r\n<script type=\"text/javascript\" src=\"/socket.io/socket.io.js\"></script>\r\n<script type=\"text/javascript\" src=\"/socket.io/mapred.io.js\"></script>\r\n<script type=\"text/javascript\" >\r\nvar socket = io.connect();\r\nvar MapredClient = new MapredClient(socket);\r\n</script>\r\n```\r\n## Submit Job\r\n```html\r\n<script type=\"text/javascript\" src=\"/socket.io/socket.io.js\"></script>\r\n<script type=\"text/javascript\" src=\"/socket.io/mapred.io.js\"></script>\r\n<script type=\"text/javascript\" >\r\n\r\nvar input = [\r\n\t['frase primera', 'primer trozo de informacion para procesado primer trozo'],\r\n\t['segunda frase', 'segundo trozo de informacion trozo de'],\r\n\t['cacho 3', 'otro trozo para ser procesado otro otro otro trozo'],\r\n\t['cuarta frase', 'primer trozo de informacion para procesado primer trozo'],\r\n\t['frase 5', 'segundo trozo de informacion trozo de']\r\n], inputs = input, i;\r\n//for ( i = 0 ; i &lt; 20000 ; i ++ ) inputs = inputs.concat(input);\r\n\r\nsocket.emit('job', { map: (function(key, value){\r\n    var list = [], aux = {};\r\n        value = value.split(' ');\r\n        value.forEach(function(w){\r\n            aux[w] = (aux[w] || 0) + 1;\r\n        });\r\n        for(var k in aux){\r\n            list.push([k, aux[k]]);\r\n        }\r\n        return list;\r\n    }).toString(), reduce: (function(key, values){\r\n        var sum = 0;\r\n        values.forEach(function(e){\r\n            sum += e;\r\n        });\r\n        return sum;\r\n    }).toString(), inputs:inputs)\r\n```\r\n## To do\r\n1. Performance Test\r\n2. Client program (the standalone client not on the browser).\r\n3. Stored the datas (the server do not have enough memory to handle large data, Need a fast persistent storage framework. Just using the store of socket.io default is \"MemoryStore\", you can using \"RedisStore\")\r\n\r\n![screenshot](https://f.cloud.github.com/assets/1826685/597401/5c4b1576-cbf4-11e2-9dcf-18dbad84b402.png)\r\n![screenshot](https://f.cloud.github.com/assets/1826685/594156/1a112198-ca5d-11e2-87cd-cc11069e530f.png)\r\nupdate the screeshot\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}